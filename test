admin@MacBook-Air-admin-2 tems % g++ -std=c++17 test121.cpp funs.cpp -o tests \
-I/opt/homebrew/include \
-L/opt/homebrew/lib \
-lgtest -lgtest_main -pthread
admin@MacBook-Air-admin-2 tems % ./tests
Running main() from /private/tmp/googletest-20250910-5249-qce8ci/googletest-1.17.0/googletest/src/gtest_main.cc
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from FileTest
[ RUN      ] FileTest.MinMaxTest
[       OK ] FileTest.MinMaxTest (0 ms)
[ RUN      ] FileTest.AverageTest
[       OK ] FileTest.AverageTest (0 ms)
[ RUN      ] FileTest.ResultsWriteTest
[       OK ] FileTest.ResultsWriteTest (0 ms)
[----------] 3 tests from FileTest (0 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 3 tests.
admin@MacBook-Air-admin-2 tems % cat test121
. cpp
cat: test121.: No such file or directory
cat: cpp: No such file or directory
admin@MacBook-Air-admin-2 tems % cat test1
21.cpp
#include <fstream>
#include <gtest/gtest.h>
#include <iostream>
using namespace std;

#include "funs.h"

void WriteInts(const char *file, const vector<int> &data) {
  ofstream f(file, ios::binary);
  for (int x : data)
    f.write((char *)&x, sizeof(int));
}

vector<double> ReadDoubles(const char *file) {
  ifstream f(file, ios::binary);
  vector<double> res;
  double x;
  while (f.read((char *)&x, sizeof(double)))
    res.push_back(x);
  return res;
}

TEST(FileTest, MinMaxTest) {
  WriteInts("t.bin", {-5, 10, 3, 8});

  int mn, mx;
  FindMinMax("t.bin", mn, mx);

  EXPECT_EQ(mn, -5);
  EXPECT_EQ(mx, 10);
}

TEST(FileTest, AverageTest) {
  WriteInts("t.bin", {2, 4, 6});

  double avg = CalcAverageAll("t.bin");

  EXPECT_DOUBLE_EQ(avg, 4.0);
}

TEST(FileTest, ResultsWriteTest) {
  double a = 5.5, b = 10.25;
  WriteResults("out.bin", a, b);

  auto res = ReadDoubles("out.bin");

  ASSERT_EQ(res.size(), 2);
  EXPECT_DOUBLE_EQ(res[0], 5.5);
  EXPECT_DOUBLE_EQ(res[1], 10.25);
}
admin@MacBook-Air-admin-2 tems 
admin@MacBook-Air-admin-2 tems % 
